### Foundation과 UIKit/AppKit

애플은 자사 플랫폼을 위한 비동기 프로그래밍을 계속 개선해왔어. 다양한 시스템 레벨에서 비동기 코드를 생성하고 실행할 수 있는 몇 가지 메커니즘을 만들었지. 이런 것들을 모바일 앱을 작성할 때 기본적으로 많이 사용하니까 아마 의식하지 않고도 너의 프로젝트에서 사용해봤을 거야.

다음과 같은 것들을 사용해봤을 가능성이 높아:
- **NotificationCenter**: 사용자가 기기의 방향을 변경하거나 소프트웨어 키보드가 화면에 나타나거나 사라질 때처럼, 관심 있는 이벤트가 발생할 때마다 코드를 실행하도록 해줘.
- **델리게이트 패턴**: 다른 객체를 대신해서, 또는 다른 객체와 협력하여 행동하도록 객체를 정의할 수 있게 해. 예를 들어, 앱 델리게이트에서 새로운 원격 알림이 도착했을 때 무슨 일이 일어나야 할지를 정의하지만, 이 코드가 언제 실행될지 또는 몇 번 실행될지는 알 수 없지.
- **Grand Central Dispatch와 Operations**: 작업을 실행하는 것을 추상화할 수 있어. 순차적으로 코드를 실행하도록 일련의 큐에 스케줄을 잡거나, 다양한 우선순위를 가진 다른 큐에서 동시에 많은 작업을 실행할 수 있도록 도와줘.
- **클로저**: 코드에서 다른 객체가 그것을 실행할지, 몇 번 실행할지, 어떤 맥락에서 실행할지 결정할 수 있도록 코드 조각을 생성하고 전달할 수 있어.

대부분의 전형적인 코드는 어떤 형태로든 비동기적으로 일부 작업을 수행하고, 모든 UI 이벤트는 본질적으로 비동기적이기 때문에, 앱 코드가 전체적으로 어떤 순서로 실행될지 가정하는 것은 불가능해.

그렇지만 좋은 비동기 프로그램을 작성하는 것은 가능해. 단지, 우리가 원하는 것보다 좀 더 복잡할 뿐이야. 불행히도 비동기 코드와 자원 공유는 재현하거나 추적하고 마침내 수정하기 어려운 문제들을 야기할 수 있어.

이 문제들의 원인 중 하나는 실제로 사용되는 앱이 각기 다른 인터페이스를 가진 여러 종류의 비동기 API를 모두 사용한다는 사실이야. 예를 들어, Combine은 Swift 생태계에 새로운 언어를 도입하려고 해. 이는 비동기 프로그래밍 세계의 혼돈에 더 많은 질서를 가져오는 데 도움을 줄 수 있어.
### Foundation of Combine

iOS 13과 macOS Catalina에서 애플은 내장 시스템 프레임워크인 Combine을 통해 자사 생태계에 반응형 프로그래밍 지원을 도입했어. 애플의 새로운 기술과 마찬가지로 처음에는 그 적용이 약간 제한적이야: Combine은 iOS 13 또는 macOS Catalina 이상을 지원하는 앱에서만 사용할 수 있어.

### Combine basics
#### Publisher
퍼블리셔는 시간이 지남에 따라 하나 이상의 관심 있는 구독자에게 값을 발행할 수 있는 타입이야. 퍼블리셔의 내부 로직은 수학 계산, 네트워킹, 사용자 이벤트 처리를 포함하여 거의 무엇이든 될 수 있지만, 모든 퍼블리셔는 세 가지 유형의 이벤트를 여러 번 발행할 수 있어:

1. 퍼블리셔의 제네릭 Output 타입의 출력 값.
2. 성공적인 완료.
3. 퍼블리셔의 Failure 타입에 대한 에러와 함께 완료.

퍼블리셔는 0개 이상의 출력 값을 발행할 수 있으며, 성공적으로 또는 실패로 인해 완료되면 다른 이벤트는 발행하지 않아.

여기에 Int 값을 발행하는 퍼블리셔가 시간 축에 시각화된 모습을 보여줄게: 

![](Pasted%20image%2020240703225012.png)

파란 상자는 타임라인에서 주어진 시간에 발행된 값을 나타내고, 숫자는 발행된 값을 나타내. 다이어그램 오른쪽에 보이는 세로선은 스트림의 성공적인 완료를 나타내.

이 세 가지 가능한 이벤트의 간단한 계약은 프로그램에서 어떤 종류의 동적 데이터를 나타낼 수 있을 만큼 보편적이어서, 네트워크 호출을 하거나, 사용자 제스처에 반응하거나, 화면에 데이터를 표시하는 것과 같은 앱의 어떤 작업도 Combine 퍼블리셔를 사용하여 처리할 수 있어.

#### Operator
