참고: https://developer.apple.com/documentation/http-live-streaming
# Overview
HTTP 라이브 스트리밍(HLS)은 오디오와 비디오를 일반 웹 서버를 통해 HTTP로 전송하여 iOS 기반 장치(iPhone, iPad, iPod touch, Apple TV)와 macOS 데스크탑에서 재생하는 기술입니다. 웹 프로토콜을 사용하여 콘텐츠를 배포하며, HLS는 네트워크 상태에 따라 동적으로 적응하여 안정적인 재생을 제공합니다. 이 기술은 웹 서버와 콘텐츠 배포 네트워크(CDN)를 사용해 콘텐츠를 배포하고, 네트워크 상태에 따라 최적화된 재생을 제공합니다.

HLS는 다음 기능을 지원합니다:

- 라이브 방송 및 사전 녹화된 콘텐츠(VOD)
- 다양한 비트레이트의 대체 스트림
- 네트워크 대역폭 변화에 따른 스트림 전환
- 미디어 암호화와 사용자 인증

### 미디어 인코딩 및 전송

HLS는 세 가지 주요 구성 요소로 나뉩니다: 서버 구성 요소, 배포 구성 요소, 클라이언트 소프트웨어.

1. **서버 구성 요소**:
    
    - 오디오 및 비디오 입력을 수신하여 디지털로 인코딩합니다.
    - 인코딩된 미디어를 세그먼트로 나누고, 세그먼트를 웹 서버에 저장합니다.
    - 이 과정에서 생성된 인덱스 파일을 웹 서버에 게시하여 클라이언트 소프트웨어가 접근할 수 있도록 합니다.
2. **배포 구성 요소**:
    
    - 웹 서버 또는 웹 캐싱 시스템을 사용해 미디어 파일과 인덱스 파일을 클라이언트에게 HTTP를 통해 전송합니다.
    - HLS를 배포하려면 브라우저용 HTML 페이지나 클라이언트 앱을 만들어야 합니다.
3. **클라이언트 소프트웨어**:
    
    - 적절한 미디어 파일을 요청하고, 다운로드한 후, 이를 재조립하여 사용자가 끊김 없이 스트리밍을 볼 수 있게 합니다.
    - Apple에서 제공하는 AVKit, AVFoundation, WebKit 프레임워크를 사용하여 HLS를 구현할 수 있습니다.
    - 자체 클라이언트를 개발할 경우, 인덱스 파일에서 미디어 파일을 순차적으로 다운로드하고 재조립하여 재생해야 합니다.

클라이언트는 암호화 키를 가져오고, 인증을 처리하며, 미디어 파일을 복호화하는 책임이 있습니다. 인덱스 파일에 `EXT-X-ENDLIST` 태그가 없으면 방송이 계속되고 있다는 의미이므로, 주기적으로 새로운 인덱스 파일을 로드하여 재생 목록을 갱신해야 합니다.

### 요약

HTTP 라이브 스트리밍(HLS)은 오디오와 비디오를 웹 서버를 통해 iOS 및 macOS 장치에서 스트리밍할 수 있도록 하는 기술입니다. HLS는 라이브 방송과 VOD를 지원하며, 네트워크 상태에 따라 자동으로 스트림을 전환합니다. 이 기술은 인코딩된 미디어를 세그먼트로 나누어 웹 서버에 저장하고, 클라이언트가 이를 순차적으로 다운로드하여 재생하도록 설계되어 있습니다. 클라이언트는 Apple의 다양한 프레임워크를 이용해 쉽게 구현할 수 있습니다.