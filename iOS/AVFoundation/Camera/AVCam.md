### 개요
AVCam은 iPhone과 iPad의 전면 및 후면 카메라를 사용하여 사진을 찍고 비디오를 녹화하는 Apple의 공식 샘플 프로젝트입니다. 이 샘플 코드는 AVFoundation 프레임워크를 사용하여 완전한 기능을 갖춘 카메라 앱을 구현하는 방법을 보여줍니다.

### 핵심 구성 요소

**1. AVCaptureSession**
- 입력 장치(카메라, 마이크)에서 적절한 출력으로 데이터를 마샬링하여 최종적으로 동영상 파일이나 정지 사진을 생성합니다
- AVCam은 기본적으로 후면 카메라를 선택하고 비디오 미리보기 뷰에 콘텐츠를 스트리밍하도록 카메라 캡처 세션을 구성합니다

**2. PreviewView**
- AVCaptureVideoPreviewLayer로 지원되는 커스텀 UIView 서브클래스입니다. AVFoundation에는 PreviewView 클래스가 없지만 샘플 코드에서 세션 관리를 용이하게 하기 위해 하나를 생성합니다

**3. 스레드 관리**
- AVCaptureSession과의 모든 상호작용을 전용 직렬 디스패치 큐(sessionQueue)에 위임하여 메인 큐를 차단하지 않도록 합니다
- 세션 토폴로지 변경이나 실행 중인 비디오 스트림 중단과 관련된 구성은 별도의 디스패치 큐에서 수행합니다

### 주요 기능

**1. 카메라 전환**
- changeCamera 메서드는 사용자가 UI의 버튼을 탭할 때 카메라 간 전환을 처리합니다. 디스커버리 세션을 사용하여 선호도 순서대로 사용 가능한 장치 유형을 나열하고 devices 배열의 첫 번째 장치를 허용합니다

**2. 권한 관리**
- 각 AVCaptureDevice(카메라든 마이크든)는 사용자의 액세스 승인이 필요합니다. AVFoundation은 AVAuthorizationStatus를 사용하여 승인 상태를 열거하며, 이는 사용자가 캡처 장치에 대한 액세스를 제한하거나 거부했는지를 앱에 알려줍니다

**3. 고급 기능 지원**
- AVCapturePhotoOutput을 사용하여 AVCam은 캡처 장치에 쿼리하여 해당 구성이 깊이 데이터와 포트레이트 효과 매트를 정지 이미지에 전달할 수 있는지 확인합니다
- 깊이 데이터, 포트레이트 효과 매트, Live Photos 지원
- 기기가 이러한 모드 중 하나를 지원하지 않으면 AVCam은 해당 모드의 버튼을 숨깁니다

### iOS 18의 새로운 기능
iOS 18에서는 다음과 같은 새로운 기능이 도입되었습니다:

- **Zero Shutter Lag**: 셔터를 누르기 전에 프레임을 캡처하여 지연 시간을 줄입니다
- **Deferred Photo Processing**: 처리를 지연시켜 더 빠른 사진 캡처를 가능하게 합니다
- **Video Effects and Reactions**: 비디오 캡처 중 실시간 효과(예: 색종이) 추가를 가능하게 합니다
- **Responsive Capture Enhancements**: 고속 움직임 시나리오에서 미디어 캡처 시 성능을 향상시킵니다

### 기술적 요구사항
- AVCam을 사용하려면 iOS 13 이상을 실행하는 iOS 기기가 필요합니다. Xcode는 기기 카메라에 액세스할 수 없기 때문에 이 샘플은 시뮬레이터에서 작동하지 않습니다

이 문서는 AVFoundation 프레임워크를 사용하여 완전한 기능을 갖춘 카메라 앱을 개발하고자 하는 iOS 개발자들에게 핵심적인 가이드 역할을 하며, 실제 앱 스토어 수준의 카메라 기능을 구현하는 데 필요한 모든 기본 요소들을 다루고 있습니다.