이 문서는 Apple의 AVFoundation 프레임워크의 Capture 서브시스템을 설명하며, iOS와 macOS에서 비디오, 사진, 오디오 캡처를 위한 설정 방법을 다룹니다.

## 개요

AVFoundation Capture 서브시스템은 다음과 같은 경우에 사용됩니다:

- 앱의 사용자 경험에 맞는 커스텀 카메라 UI 구축
- 포커스, 노출, 안정화 등 사진/비디오 캡처에 대한 직접적인 제어
- RAW 포맷 사진, 깊이 맵, 커스텀 메타데이터가 포함된 비디오 등 시스템 카메라와 다른 결과물 생산
- 캡처 장치에서 직접 스트리밍되는 픽셀/오디오 데이터에 실시간 액세스

## 핵심 구조

- **Sessions**: 하나 이상의 입력과 출력을 연결
- **Inputs**: 카메라, 마이크 등의 미디어 소스
- **Outputs**: 입력으로부터 미디어를 획득하여 유용한 데이터(파일, 픽셀 버퍼 등) 생산

## 주요 구성 요소

### 권한 및 세션
- **권한 요청**: 카메라, 마이크, 사진 라이브러리 접근 권한 획득
- **캡처 세션 설정**: 입력 장치, 출력 미디어, 미리보기 뷰 구성
- **멀티태스킹 지원**: iPad의 Split View, Slide Over 등에서 카메라 사용

### 캡처 장치
- **장치 선택**: 전면/후면 카메라, TrueDepth 카메라, 듀얼 카메라 등
- **연속성 장치**: 근처 iOS 장치의 카메라/마이크 접근
- **외부 저장 장치**: 물리적 외부 저장소 관리

### 미리보기 및 제어
- **비디오 미리보기**: Core Animation 레이어를 통한 카메라 미리보기
- **오디오 미리보기**: 캡처된 오디오 미리보기
- **캡처 컨트롤**: 줌, 노출 등의 시스템 제어 요소

### 특수 기능
- **시네마틱 비디오**: 조정 가능한 피사계 심도와 포커스 포인트
- **멀티 카메라**: 전면/후면 카메라 동시 녹화
- **바코드/얼굴 인식**: 기계 판독 가능한 코드나 얼굴 식별
- **연속성 카메라**: tvOS/macOS 앱에서 iPhone/iPad 카메라 활용

## 캡처 유형
- **사진 캡처**: 정지 이미지 촬영
- **오디오/비디오 캡처**: 동영상 및 음성 녹화
- **추가 데이터 캡처**: 메타데이터, 깊이 정보 등

이 프레임워크는 시스템 카메라 UI 대신 완전히 커스터마이징된 미디어 캡처 경험을 구축하고자 하는 개발자들을 위한 포괄적인 솔루션을 제공합니다.