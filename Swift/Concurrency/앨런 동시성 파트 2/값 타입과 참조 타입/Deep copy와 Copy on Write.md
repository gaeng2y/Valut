## 1. Deep Copy (ê¹Šì€ ë³µì‚¬)

* **ê°’ íƒ€ì…(Value Type)** ì€ ê¸°ë³¸ì ìœ¼ë¡œ ëŒ€ì…í•˜ê±°ë‚˜ í•¨ìˆ˜ì— ì „ë‹¬ë  ë•Œ **ë³µì‚¬(copy)** ê°€ ì¼ì–´ë‚©ë‹ˆë‹¤.
* "ê¹Šì€ ë³µì‚¬"ë¼ëŠ” ê²ƒì€ **ë‚´ë¶€ì— ìˆëŠ” ëª¨ë“  ê°’ë“¤ì„ ì™„ì „íˆ ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ì— ë³µì œ**í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
* ë”°ë¼ì„œ ì›ë³¸ê³¼ ë³µì‚¬ë³¸ì€ ì™„ì „íˆ ë…ë¦½ì ì´ë©°, í•œ ìª½ì„ ë³€ê²½í•´ë„ ë‹¤ë¥¸ ìª½ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.

ğŸ“Œ ì˜ˆì‹œ (ê°„ë‹¨í•œ ê°’ íƒ€ì… êµ¬ì¡°ì²´)

```swift
struct Point {
    var x: Int
    var y: Int
}

var p1 = Point(x: 10, y: 20)
var p2 = p1 // ê¹Šì€ ë³µì‚¬
p2.x = 99

print(p1.x) // 10
print(p2.x) // 99
```

â†’ `p1`ê³¼ `p2`ëŠ” ë³„ê°œ ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ê°’.

í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” Swiftì—ì„œ **ëª¨ë“  ê°’ íƒ€ì…ì´ ë¬´ì¡°ê±´ Deep Copyë¥¼ ë°”ë¡œ í•˜ëŠ” ê±´ ì•„ë‹˜** â†’ ì—¬ê¸°ì„œ COWê°€ ë“±ì¥í•©ë‹ˆë‹¤.

---

## 2. Copy on Write (COW, ì“°ê¸° ì‹œ ë³µì‚¬)

* Swiftì˜ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ ê¸°ë²•.
* `Array`, `Dictionary`, `Set`, `String` ê°™ì€ **ì»¬ë ‰ì…˜ íƒ€ì…(ê°’ íƒ€ì…)** ì— ì ìš©ë©ë‹ˆë‹¤.
* ëŒ€ì…í•  ë•Œ **ì¦‰ì‹œ ë³µì‚¬í•˜ì§€ ì•Šê³ **, ì›ë³¸ê³¼ ë³µì‚¬ë³¸ì´ **ê°™ì€ ë©”ëª¨ë¦¬ë¥¼ ê³µìœ **í•˜ë‹¤ê°€, **ì‹¤ì œë¡œ ê°’ì„ ìˆ˜ì •í•˜ë ¤ê³  í•  ë•Œ(copy on *write*)** ë¹„ë¡œì†Œ ê¹Šì€ ë³µì‚¬ê°€ ì¼ì–´ë‚©ë‹ˆë‹¤.

ğŸ“Œ ì˜ˆì‹œ

```swift
var a = [1, 2, 3]
var b = a // ì•„ì§ ê°™ì€ ë©”ëª¨ë¦¬ ê³µìœ  (ë³µì‚¬ ì•ˆ ë¨)
print(Unmanaged.passUnretained(a as AnyObject).toOpaque())
print(Unmanaged.passUnretained(b as AnyObject).toOpaque())

b[0] = 99 // ì´ ì‹œì ì—ì„œ ë³µì‚¬ ë°œìƒ (Deep Copy)
print(a) // [1, 2, 3]
print(b) // [99, 2, 3]
```

ğŸ‘‰ ì´ ë°©ì‹ ë•ë¶„ì— ì„±ëŠ¥ì´ ìµœì í™”ë©ë‹ˆë‹¤:

* **ì½ê¸°ë§Œ í•  ë•ŒëŠ” ë³µì‚¬ ë¹„ìš©ì´ ì—†ë‹¤.**
* **ì“°ê¸° ì‹œì—ë§Œ ì§„ì§œ ë³µì‚¬ê°€ ì¼ì–´ë‚œë‹¤.**

---

## 3. ì •ë¦¬

| êµ¬ë¶„     | Deep Copy              | COW (Copy on Write)            |
| ------ | ---------------------- | ------------------------------ |
| ì–¸ì œ ë³µì‚¬? | ëŒ€ì… ì‹œ ì¦‰ì‹œ ëª¨ë“  ë°ì´í„° ë³µì‚¬      | ëŒ€ì… ì‹œ ê³µìœ  â†’ ìˆ˜ì •í•  ë•Œ ë³µì‚¬             |
| ë¹„ìš©     | í•­ìƒ ë†’ì€ ë¹„ìš©               | í•„ìš”í•  ë•Œë§Œ ë¹„ìš© ë°œìƒ                   |
| ì ìš©     | ì¼ë°˜ ê°’ íƒ€ì… (struct, enum) | Swift ì»¬ë ‰ì…˜ íƒ€ì… (Array, String ë“±) |
| ì¥ì      | ë…ë¦½ì„± ë³´ì¥                 | ë©”ëª¨ë¦¬ ì ˆì•½ + ì„±ëŠ¥ ìµœì í™”                |

---

âœ… Swiftì˜ í•µì‹¬ ì² í•™ì€ **ê°’ íƒ€ì…ì„ ê¸°ë³¸ìœ¼ë¡œ í•˜ê³ , COWë¡œ ì„±ëŠ¥ì„ ìµœì í™”**í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ Swiftì—ì„œ `Array` ê°™ì€ íƒ€ì…ì„ ê°’ íƒ€ì…ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì“°ë©´ì„œë„, ì„±ëŠ¥ì€ ì°¸ì¡° íƒ€ì…ì²˜ëŸ¼ ë¹ ë¥´ê²Œ ìœ ì§€í•  ìˆ˜ ìˆëŠ” ê±°ì˜ˆìš”.

---

ê·¸ëŸ¬ë©´ Swiftì—ì„œ **Arrayì˜ COW(Copy on Write) ë™ì‘**ì„ ì§ì ‘ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì˜ˆì œë¥¼ ë³´ì—¬ë“œë¦´ê²Œìš”. 
í•µì‹¬ì€ **ìˆ˜ì • ì „ê¹Œì§€ëŠ” ê°™ì€ ë©”ëª¨ë¦¬ë¥¼ ê³µìœ **í•˜ë‹¤ê°€, ìˆ˜ì • ì‹œì ì— **ì‹¤ì œ ë³µì‚¬(Deep Copy)** ê°€ ì¼ì–´ë‚œë‹¤ëŠ” ê±¸ í™•ì¸í•˜ëŠ” ê±°ì˜ˆìš”.

---

## ğŸ“Œ COW ë™ì‘ í™•ì¸ ì˜ˆì œ

```swift
import Foundation

// ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ì¶œë ¥í•˜ëŠ” í—¬í¼ í•¨ìˆ˜
func address(of array: [Int]) -> String {
    return array.withUnsafeBufferPointer { buffer in
        return String(describing: buffer.baseAddress)
    }
}

var a = [1, 2, 3]
var b = a // ì—¬ê¸°ì„œëŠ” ë³µì‚¬ X (ë©”ëª¨ë¦¬ ê³µìœ )

print("ì´ˆê¸° ìƒíƒœ")
print("a ì£¼ì†Œ:", address(of: a))
print("b ì£¼ì†Œ:", address(of: b))

// bë¥¼ ìˆ˜ì •í•˜ê¸° ì „ê¹Œì§€ëŠ” aì™€ bê°€ ê°™ì€ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê³µìœ 
b[0] = 99 // ì´ ìˆœê°„ ë³µì‚¬ ë°œìƒ (Deep Copy)

print("\nìˆ˜ì • í›„")
print("a:", a)
print("b:", b)
print("a ì£¼ì†Œ:", address(of: a))
print("b ì£¼ì†Œ:", address(of: b))
```

---

## ğŸ“Œ ì‹¤í–‰ ê²°ê³¼ ì˜ˆì‹œ

(ì£¼ì†Œ ê°’ì€ í™˜ê²½ë§ˆë‹¤ ë‹¤ë¥´ì§€ë§Œ, íë¦„ì€ ê°™ìŒ)

```
ì´ˆê¸° ìƒíƒœ
a ì£¼ì†Œ: Optional(0x00006000011a8200)
b ì£¼ì†Œ: Optional(0x00006000011a8200)   // ê°™ì€ ì£¼ì†Œ (ê³µìœ )

ìˆ˜ì • í›„
a: [1, 2, 3]
b: [99, 2, 3]
a ì£¼ì†Œ: Optional(0x00006000011a8200)
b ì£¼ì†Œ: Optional(0x00006000011a8400)   // ë‹¤ë¥¸ ì£¼ì†Œ (Deep Copy ë°œìƒ)
```

---

âœ… ìš”ì•½

* `a`ë¥¼ `b`ì— ëŒ€ì…í•  ë•ŒëŠ” ì‹¤ì œ ë³µì‚¬í•˜ì§€ ì•Šê³  ê°™ì€ ë©”ëª¨ë¦¬ë¥¼ ê³µìœ í•¨.
* `b`ë¥¼ **ìˆ˜ì •í•˜ëŠ” ìˆœê°„** Swiftê°€ ìë™ìœ¼ë¡œ Deep Copyë¥¼ ìˆ˜í–‰í•´ ë…ë¦½ëœ ë°°ì—´ì„ ë§Œë“¦.
* ì´ê²Œ ë°”ë¡œ Swift ì»¬ë ‰ì…˜ íƒ€ì…ì—ì„œì˜ **COW ìµœì í™”**.

---
