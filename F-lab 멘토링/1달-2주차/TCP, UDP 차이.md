TCP(Transmission Control Protocol)와 UDP(User Datagram Protocol)는 인터넷 프로토콜 스위트의 주요 전송 계층 프로토콜로, 둘 다 데이터를 전송하기 위해 사용되지만 그 특성과 용도에서 중요한 차이점이 있습니다. 

### TCP(Transmission Control Protocol)

1. **연결 지향적(Connection-oriented)**:
   - 데이터를 전송하기 전에 송신자와 수신자 간에 연결을 설정합니다. 이 연결은 3-way handshake(삼중 핸드셰이크)를 통해 이루어집니다.
   - 데이터 전송이 끝나면 연결을 종료합니다.

2. **신뢰성(Reliability)**:
   - 데이터가 순서대로 도착하도록 보장하며, 손실된 패킷은 재전송합니다.
   - 흐름 제어와 혼잡 제어 메커니즘을 통해 네트워크 상태를 관리합니다.
   - 에러 검출 및 수정 기능이 있어 데이터의 무결성을 보장합니다.

3. **속도**:
   - 신뢰성을 보장하기 위해 추가적인 오버헤드가 발생하므로 UDP보다 상대적으로 느립니다.

4. **사용 예시**:
   - 파일 전송(FTP)
   - 웹 브라우징(HTTP/HTTPS)
   - 이메일 전송(SMTP)

### UDP(User Datagram Protocol)

1. **비연결 지향적(Connectionless)**:
   - 연결 설정 과정이 없습니다. 데이터그램을 독립적으로 전송합니다.
   - 각 패킷은 독립적으로 처리되며, 서로 다른 경로를 통해 전송될 수 있습니다.

2. **비신뢰성(Unreliability)**:
   - 데이터그램이 손실되거나 순서가 뒤바뀌거나 중복될 수 있으며, 이를 감지하거나 수정하는 메커니즘이 없습니다.
   - 에러 검출은 가능하지만, 수정은 하지 않습니다.

3. **속도**:
   - 연결 설정 및 관리에 대한 오버헤드가 없기 때문에 TCP보다 빠릅니다.
   - 실시간 응용 프로그램에서 선호됩니다.

4. **사용 예시**:
   - 실시간 스트리밍(비디오, 오디오)
   - 온라인 게임
   - DNS 조회

### 비교 요약

| 특징       | TCP                           | UDP                      |
| -------- | ----------------------------- | ------------------------ |
| 연결 방식    | 연결 지향적 (Connection-oriented)  | 비연결 지향적 (Connectionless) |
| 신뢰성      | 신뢰성 있음, 데이터 순서 보장, 손실 패킷 재전송  | 신뢰성 없음, 순서 보장 없음, 재전송 없음 |
| 속도       | 느림 (추가 오버헤드 있음), 패킷순서, 커넥션 등등 | 빠름 (오버헤드 적음)             |
| 오버헤드     | 높음 (연결 설정, 흐름 제어, 혼잡 제어 등)    | 낮음 (단순 데이터그램 전송)         |
| 주요 사용 사례 | 파일 전송, 웹 브라우징, 이메일 전송         | 실시간 스트리밍, 온라인 게임, DNS 조회 |

이와 같이, TCP는 데이터의 신뢰성과 무결성을 중요시하는 응용 프로그램에 적합하며, UDP는 속도가 중요하고 약간의 데이터 손실이 허용되는 실시간 응용 프로그램에 적합합니다.

TCP 오버헤드

## 3-way handshake
### 1단계: SYN (Synchronize)

- **클라이언트 -> 서버**: 클라이언트는 서버에 연결을 요청합니다. 이를 위해 클라이언트는 초기 순서 번호(Sequence Number)를 설정하고, SYN 플래그가 설정된 TCP 세그먼트를 서버로 보냅니다.
- **내용**: 클라이언트가 보낸 세그먼트는 SYN 플래그가 설정되어 있으며, 이를 SYN 세그먼트라고 합니다.

### 2단계: SYN-ACK (Synchronize-Acknowledge)

- **서버 -> 클라이언트**: 서버는 클라이언트의 요청을 받고, 이를 확인합니다. 서버는 자신의 초기 순서 번호를 설정하고, 클라이언트의 SYN 세그먼트를 확인하는 ACK 플래그가 설정된 TCP 세그먼트를 클라이언트에게 보냅니다. 이 세그먼트는 SYN 플래그와 ACK 플래그가 모두 설정되어 있습니다.
- **내용**: 서버가 보낸 세그먼트는 SYN과 ACK 플래그가 설정되어 있으며, 이를 SYN-ACK 세그먼트라고 합니다.

### 3단계: ACK (Acknowledge)

- **클라이언트 -> 서버**: 클라이언트는 서버의 응답을 받고, 서버의 SYN-ACK 세그먼트를 확인하는 ACK 플래그가 설정된 TCP 세그먼트를 서버로 보냅니다. 이 단계에서 클라이언트는 데이터 전송을 시작할 준비가 되었음을 알립니다.
- **내용**: 클라이언트가 보낸 세그먼트는 ACK 플래그가 설정되어 있으며, 이를 ACK 세그먼트라고 합니다.

### 3-way handshake의 단계 요약

1. **SYN 세그먼트 (클라이언트 -> 서버)**:
    - 클라이언트: "연결을 시작하고 싶습니다. 여기 내 초기 순서 번호입니다."
2. **SYN-ACK 세그먼트 (서버 -> 클라이언트)**:
    - 서버: "연결 요청을 받았습니다. 여기 내 초기 순서 번호입니다. 당신의 초기 순서 번호도 확인했습니다."
3. **ACK 세그먼트 (클라이언트 -> 서버)**:
    - 클라이언트: "서버의 초기 순서 번호를 확인했습니다. 이제 데이터 전송을 시작할 준비가 되었습니다."

이 과정을 통해 클라이언트와 서버는 서로의 초기 순서 번호를 교환하고, 데이터 전송을 위한 안정적인 연결을 설정합니다. 3-way handshake는 TCP의 신뢰성과 데이터 전송의 무결성을 보장하기 위한 중요한 절차입니다.